### 3장. 데이터 색인, 변경, 삭제
- 같은 색인에서 도큐먼트의 다수 개 타입을 정의하는 매핑 타입 사용
- 매핑에 사용 가능한 필드 타입
- 사전 정의된 필드와 필드 옵션 사용
- 데이터 색인, 변경 및 삭제에 도움되는 모든 것

#### 3.1 도큐먼트 종류를 정의하는 매핑 사용하기
###### 3.1.1 매핑 검색 및 정의하기
- 현재 매핑 가져오기 
  - 타입의 URL 다음에 _mapping을 덧붙여서 HTTP GET으로 호출 
- 새 매핑 정의하기
  - 기존과 같은 URL을 사용하지만 HTTP PUT으로 호출

###### 3.1.2 기존 매핑 확장하기
- 새 매핑을 기존 매핑에 입력하면, 엘라스틱서치는 이 둘을 병합함
  - 이미 존재하는 필드 데이터 타입은 변경할 수 없음 
  - 필드를 색인하는 방법을 변경할 수 없음 

#### 3.2 도큐먼트 필드를 정의하는 기본 타입
###### 3.2.1 문자열
- 기본 분석기는 모든 문자를 소문자로 만들고 문자열을 단어로 단위로 분해함
  - "Late Night with Elasticsearch"
    - late, night, with, elasticsearch의 네 가지 텀을 만들어 냄 
- 매핑에서 분석을 위한 다수위 옵션을 지정할 수 있음 
  - 원본 텀의 동의어 텀을 만들어 내는 분석을 설정할 수 있음 
  - not_analyzed로 설정하면 분석 과정을 건너뛰고 전체 문자열을 단일 텀으로 색인

###### 3.2.2 숫자
- 부동소수점을 포함할 수도, 아닐 수도 있음 
  - 필요X: byte, short, integer, long
  - 필요O: float, double 

###### 3.2.3 날짜
- 문자열로 된 날짜를 파싱하고 long타입의 숫자로 저장 

###### 3.2.4 불린
- 도큐먼트에 true/false 값을 저장하기 위해 사용
  - true/false를 각각 T와 F로 변환 

#### 3.3 배열과 다중 필드
###### 3.3.1 배열
- 다수 개 값으로 필드를 색이하려면, 대괄호([])로 값을 둘러쌈 

###### 3.3.2 다중 필드
- 같은 데이터를 다른 설정으로 여러 번 색인 

#### 3.4 사전 정의된 필드 사용하기
- 기본 필드와 다른 점 
  - 사전 정의된 필드는 사용자가 정의하지 않고 엘라스틱서치가 제공
    - ex. _timestamp
  - 필드에 따라 특수 기능을 가지고 있음
    - ex. _ttl 필드는 특정 시간 이후에 삭제
  - 모두 언더스코어(_)로 시작함. 

- 사전 정의된 필드
  - _source는 색인할 때 원래의 json 도큐먼트 저장
  - _uid, _id, _type, _index

###### 3.4.1 도큐먼트를 저장하고 검색하는 방식 제어하기 
- _source
  - 원래의 내용을 저장하는 데 사용함
  - 다른 주요 기능에 _source가 필요하므로 대부분의 경우 사용하는 것이 좋음 
- _all
  - 모든 것을 색인 
  - _all로 검색할 때, 어떤 필드가 일치하는지와 무관하게 검색 결과를 반환 

###### 3.4.2 도큐먼트 식별하기

