### Chapter 3. 운영체제
- 운영체제(OS, Operating System): 사용자가 컴퓨터를 쉽게 다루게 해주는 인터페이스
- 펌웨어(firmware): 운영체제와 비슷하지만 소프트웨어를 추가로 설치할 수 없는 것

#### Section 3.1 운영체제와 컴퓨터
###### 3.1.1 운영체제의 역할과 구조

- 운영체제의 역할
  - CPU 스케쥴링과 프로세스 관리
  - 메모리 관리
  - 디스크 파일 관리
  - I/O 디바이스 관리 

- 운영체제 구조
  - GUI
  - 시스템콜: 운영체제가 커널에 접근하기 위한 인터페이스 
  - 커널
  - 드라이버

###### 3.1.2 컴퓨터의 요소
- CPU: 산술논리연산장치, 제어장치, 레지스터로 구성되어 있는 컴퓨터 장치
  - 인터럽트에 의해 메모리에 존재하는 명령어를 해석해서 실행하는 일꾼 
  - 제어장치(CU): 입출력장치 간 통신을 제어하고 명령어들을 읽고 해석하며 데이터 처리를 위한 순서 결정
  - 레지스터: CPU 안에 있는 매우 빠른 임시기억장치
  - 산술논리연산장치(ALU): 산술 연산, 논리 연산을 계산하는 디지털 회로
  - 인터럽트: 신호가 들어왔을 때 CPU를 잠시 정지시키는 것

- DMA 컨트롤러: I/O 디바이스가 메모리에 직접 접근할 수 있도록 하는 하드웨어 장치
  - CPU의 부하를 줄여줌 
- 메모리: 전자회로에서 데이터나 상태, 명령어 등을 기록하는 장치
  - 디바이스 컨트롤러: 컴퓨터와 연결되어 있는 IO 디바이스들의 작은 CPU 

#### Section 3.2 메모리
###### 3.2.1 메모리 계층 
- 레지스터: CPU 안에 있는 작은 메모리, 휘발성, 속도 가장 빠름, 기억 용량이 가장 적음
- 캐시: L1, L2 캐시, 휘발성, 속도 빠름, 기억 용량 적음
- 주기억장치(RAM): 휘발성, 속도 보통, 기억 용량 보통
- 보조기억장치(HDD, SSD): 비휘발성, 속도 낮음, 기억 용량 많음 

- 캐시: 데이터를 미리 복사해 놓는 임시 저장소 
  - 빠른 장치와 느린 장치에서 속도 차이에 따른 병목 현상을 줄이기 위한 메모리

- 캐시매핑: 캐시가 히트되기 위해 매핑하는 방법 
  - 직접 매핑: 처리가 빠르지만 충돌 발생이 잦음 
  - 연관 매핑: 관련 있는 캐시와 메모리를 매핑, 충돌이 적지만 속도가 느림
  - 집합 연관 매핑: 순서는 일치시키지만 집합을 둬서 저장하며 블록화 되어 있기 때문에 검색은 효율적

- 웹 브라우저 캐시
  - 쿠키: 만료기한이 있는 키-값 저장소 
  - 로컬 스토리지: 만료기한이 없는 키-값 저장소, 웹 브라우저를 닫아도 유지됨. 도메인 단위로 저장, 생성
  - 세션 스토리지: 만료기한이 없는 키-값 저장소, 탭 단위로 세션 스토리지 생성.

###### 3.2.2 메모리 관리

- 가상 메모리(virtual memory): 컴퓨터가 실제로 이용 가능한 메모리 자원을 추상화하여 사용자들에게 매우 큰 메모리로 보이게 하는 법
  - 가상 주소는 메모리관리장치(MMU)에 의해 실제 주소로 변환됨 
  - 가상 메모리는 '페이지 테이블'로 관리됨 
  - 페이지: 가상 메모리를 사용하는 최소 크기 단위
  - 프레임: 실제 메모리를 사용하는 최소 크기 단위

- 페이지 폴트: 가상 메모리에는 존재하지만 RAM에는 없는 데이터나 코드에 접근하는 것 

- 스와핑(swapping): 메모리에서 당장 사용하지 않는 영역을 HDD로 옮기고 HDD의 일부분을 마치 메모리처럼 불러와 쓰는 것
- 스레싱(thrashing): 메모리의 페이지 폴트율이 높은 것 
  - 메모리에 너무 많은 프로세스가 동시에 올라가 스와핑이 많이 일어나서 발생하는 것 
  - 컴퓨터의 성능 저하를 초래
  - 해결법 1 working set: 프로세스의 과거 사용 이력인 지역성(locality)을 통해 결정된 페이지 집합을 만들어 미리 메모리에 로드
  - 해결법 2 PFF(Page Fault Frequency): 페이지 폴트 빈도를 조절하는 방식 

- 메모리 할당
  1. 연속 할당
     - 고정 분할 방식: 메모리를 미리 나누어 관리하는 방식. 융툥성이 없고 내부 단편화 발생
     - 가변 분할 방식: 매 시점 프로그램의 크기에 맞게 동적으로 메모리를 나누어 사용. 외부 단편화 발생
  2. 불연속 할당 
     - 페이징: 동일한 크기의 페이지로 나누어 메모리의 서로 다른 위치에 프로세스 할당 
     - 세그멘테이션: 세그먼트로 나누는 방식. 
     - 페이지드 세그멘테이션: 프로그램을 의미 단위인 세그먼트로 나눔 
  
- 페이지 교체 알고리즘
  - 오프라인 알고리즘: 미래에 참조되는 페이지와 현재 할당하는 페이지를 바꾸는 알고리즘. 이상적인 알고리즘
  - FIFO: 가장 먼저 온 페이지를 교체 영역에 가장 먼저 놓는 방법
  - LRU(Least Recentle Used): 참조가 가장 오래된 페이지 교체
  - NUR(Not Used Recently): 1은 최근에 참조, 0은 참조되지 않음. 시계 방향으로 돌며 0을 찾고 0을 찾은 순간 교체
  - LFU(Least Frequently Used): 참조 횟수가 적은 페이지 교체 

#### Section 3.3 프로세스와 스레드
- 프로세스: 컴퓨터에서 실행되고 있는 프로그램 
###### 3.3.1 프로세스와 컴파일 과정
- 컴파일 과정
  - 소스코드 -> 전처리 -> 컴파일러 -> 어셈블리어 -> 어셈블러 -> 목적코드 + 라이브러리 -> 링커 -> 실행 가능한 파일
###### 3.3.2 프로세스의 상태 
- 생성(create): 프로세스가 생성된 상태. PCB가 할당됨 
- 대기(ready): CPU 스케쥴러로부터 CPU 소유권이 넘어오기를 기다리는 상태
- 대기 중단(ready suspended): 메모리 부족으로 일시 중단
- 실행(running): CPU 소유권과 메모리를 할당받고 인스트럭션을 수행중인 상태
- 중단(blocked): 어떤 이벤트가 발생한 후 기다리며 프로세스가 차단 된 상태 
- 일시 중단(blocked suspended): 중단된 상태에서 프로세스가 실행되려고 하지만 메모리 부족으로 중단
- 종료(terminated): 메모리와 CPU 소유권을 모두 놓고 가는 상태 
###### 3.3.2 프로세스의 상태

#### Section 3.4 CPU 스케줄링 알고리즘