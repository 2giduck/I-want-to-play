# Chapter 4. 데이터베이스
## 4.1. 데이터베이스의 기본

- 데이터베이스: 일정한 규칙, 혹은 규약을 통해 구조화되어 저장되는 데이터의 모음
- DBMS: 데이터베이스를 제어, 관리하는 통합 시스템

### 4.1.1 엔터티

- 엔터티(entity): 사람, 장소, 물건, 사건, 개념 등 여러 개의 속성을 지닌 명사
    - 약한 엔터티
    - 강한 엔터티

### 4.1.2 릴레이션

- 릴레이션(relation): 데이터베이스에서 정보를 구분하여 저장하는 기본 단위
    - RDBMS: 테이블
    - NoSQL: 컬렉션

### 4.1.3 속성

- 속성(attribute): 릴레이션에서 관리하는 구체적이며 고유한 이름을 갖는 정보

### 4.1.4 도메인

- 도메인(domain): 릴레이션에 포함된 각각의 속성들이 가질 수 있는 값의 집합

### 4.1.5 필드와 레코드

- 레코드(튜플): 테이블에 쌓이는 행(row)의 단위
- 숫자 타입
    - TINYINT, SMALLINT, MEDIUMINT, INT, BIGINT
- 날짜 타입
    - DATE, DATETIME, TIMESTMAP
- 문자 타입
    - CHAR, VARCHAR, TEXT, BLOB, ENUM, SET
    - CHAR의 경우 유동적이지 않은 길이를 가진 데이터에 적합
    - 유동적일 경우 VARCHAR
    - TEXT는 큰 문자열 저장, BLOB은 이미지, 동영상 등

### 4.1.6 관계

- 1:1 관계
- 1:N 관계: 한 개체가 다른 많은 개체를 포함하는 관계
- N:M 관계

### 4.1.7 키

- 기본키: 유일성과 최소성을 만족하는 키
    - 자연키
    - 인조키
- 외래키: 다른 테이블의 기본키를 참조하는 값으로 개체와의 관계를 식별하는데 사용
- 후보키: 기본키가 될 수 있는 후보들
- 대체키: 후보키가 두 개 이상일 경우 기본키가 아닌 남은 것들
- 슈퍼키: 각 레코드들을 유일하게 식별할 수 있는 키

## Section 2. ERD와 정규화 과정

### 4.2.1 ERD의 중요성

- ERD는 시스템 요구 사항을 기반으로 작성됨
- 비정형 데이터를 충분히 표현할 수 없다는 단점

### 4.2.2 예제로 배우는 ERD

### 4.2.3 정규화 과정

- 정규화 과정: 릴레이션 간의 잘못된 종속 관계로 인해 데이터베이스 이상 현상이 일어나서 이를 해결하거나, 저장 공간을 효율적으로 사용하기 위해 릴레이션을 여러 개로 분리하는 과정
- 정규형 원칙: 같은 의미를 표현하는 릴레이션이지만 좀 더 좋은 구조로 만들어야 하고, 자료의 중복성은 감소해야 하고, 독립적인 관계는 별개의 릴레이션으로 표현해야 하며, 각각의 릴레이션은 독립적인 표현이 가능해야 하는 것
- 제1정규형: 릴레이션의 모든 도메인이 더 이상 분해될 수 없는 원자 값만으로 구성됨
- 제2정규형: 제1정규형이며 부분 함수의 종속성을 제거한 형태
- 제3정규형: 제2정규형이며 기본키가 아닌 모든 속성이 이행적 함수 종속을 만족하지 않는 상태
- 보이스/코드 정규형(BCNF): 제3정규형이며 결정자가 후보키가 아닌 함수 종속 관계를 제거하여 릴레이션의 함수 종속 관계에서 모든 결정자가 후보키인 상태

## Section 3. 트랜잭션과 무결성

### 4.3.1 트랜잭션

- 트랜잭션: 데이터베이스에서 하나의 논리적 기능을 수행하기 위한 작업의 단위
- 원자성: 트랜잭션과 관련된 일이 모두 수행되었거나 되지 않았거나를 보장하는 특징
    - 트랜잭션 전파: 여러 트랜잭션 관련 메서드의 호출을 하나의 트랜잭션에 묶이도록 하는 것
- 일관성: 허용된 방식으로만 데이터를 변경해야 하는 것을 의미
- 격리성: 트랜잭션 수행 시 서로 끼어들지 못하는 것
- 지속성: 성공적으로 수행된 트랜잭션은 영원히 반영되어야 하는 것

### 4.3.2 무결성

- 무결성: 데이터의 정확성, 일관성, 유효성을 유지하는 것을 말하며
    - 개체 무결성
    - 참조 무결성
    - 고유 무결성
    - NULL 무결성

## Section 4. 데이터베이스의 종류

### 4.4.1 관계형 데이터베이스

- RDBMS: 행과 열을 가지는 표 형식 데이터를 저장하는 형태의 데이터베이스

### 4.4.2 NoSQL 데이터베이스

- MongoDB
    - ObjectID가 생성됨
- redis
    - 인메모리 데이터베이스이자 키-값 데이터 모델 기반의 데이터베이스

## Section 5. 인덱스

### 4.5.1 인덱스의 필요성

- 인덱스: 항목

### 4.5.2 B-트리

- 인덱스는 B-트리 자료구조로 이루어 짐

### 4.5.3 인덱스 만드는 방법

### 4.5.4 인덱스 최적화 기법

- 인덱스는 비용이다
- 항상 테스팅하라
- 복합 인덱스는 같음, 정렬, 다중 값, 카디널리티 순이다.

## Section 6. 조인의 종류

- 조인: 하나의 테이블이 아닌 두 개 이상의 테이블을 묶어서 하나의 결과물을 만드는 것
    - 내부 조인
    - 왼쪽 조인
    - 오른쪽 조인
    - 합집합 조인

### 4.6.1 내부 조인

- 두 테이블 간 교집합

### 4.6.2 왼쪽 조인

### 4.6.3 오른쪽 조인

### 4.6.4 합집합 조인

## Section 7. 조인의 원리

### 4.7.1 중첩 루프 조인

- 중첩 루프 조인(NLJ): 중첩 for문과 같은 원리로 조건에 맞는 조인을 하는 방법

### 4.7.2 정렬 병합 조인

- 각각의 테이블을 조인할 필드 기준으로 정렬하고 정렬이 끝난 후에 조인 작업을 수행

### 4.7.3 해시 조인

- 해시 조인: 해시 테이블을 기반으로 조인